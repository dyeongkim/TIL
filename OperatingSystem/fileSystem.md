# 운영체제/OperatingSystem
## 4. 파일 시스템
### 4.1 파일 시스템 구성요소
- 파일
    - 데이터 저장의 기본 단위
- 디렉토리
    - 계층 구조 내에서 파일을 구성하는데 사용되는 컨테이너
    - 효율적으로 탐색할 수 있도록 트리와 같은 구조를 만듬

- 메타데이터
    - 파일과 디렉터리를 관리하고 설명하기 위해 저장하는 추가 정보
    - 파일 크기, 생성 및 수정 시간, 액세스 권한, 소유권 정보와 같은 속성

### 4.2 접근 방법
파일에서 데이터를 읽고 쓰기 위한 다양한 액세스 방법

- 순차 접근(Sequential Access)   
파일의 처음부터 선형적이고 순차적인 방식으로 데이터를 읽거나 쓰는 방법
    - 파일의 정보가 레코드 순서대로 처리된다.
    - 현재 위치에서 읽거나 쓰면 Offset이 자동으로 증가
    - 뒤로 돌아가기 위해선 되감기가 필요.
    - 대규모 데이터 블록 읽기/쓰기 적합

- 직접 접근(Random Access)   
직접 액세스를 사용하면 파일 내의 모든 위치에서 데이터를 읽거나 쓸 수 있다.   
    - 파일의 레코드를 임의의 순서로 접근할 수 있다.
    - 디스크모델에 기반을 두고 있다.
    - 무작위 파일 블럭에 대한 임의 접근을 허용
    - 데이터베이스 관리에 유용
- 색인 접근(Index Access)   
논리적 파일 위치를 물리적 저장 위치에 매핑하는 인덱스를 사용하여 데이터 액세스
    - 파일에서 레코드를 찾기 위해 색인(Index)를 먼저 찾고 그에 대응되는 포인터를 얻는다.
    - 파일 시스템의 inode 기반 ext 계열과 같은 인덱스 할당 방법을 사용하는 시스템에 사용


### 4.3 할당 방법
파일을 저장하기 위해 저장 장치에 공간을 할당하는 방법

- 연속 할당
    - 파일이 연속된 스토리지 블록에 저장
    - 한 번의 연속 읽기/쓰기 작업으로 전체 파일에 액세스 가능.
    - 조각화를 줄이고 선능을 향상시킴
    - 시간이 지날수록 여유 공간이 조각화 된다.(외부 조각화 발생)
- 링크 할당
    - 파일을 데이터 블록의 링크된 목록으로 저장
    - 각 블록은 파일의 다음 블록에 대한 포인터를 포함
    - 파일 시스템이 파일의 특정 부분에 액세스 하기위해 블록 목록을 통과해야 해서 대용량 파일의 경우 액세스 시간이 느려진다.
- 인덱싱 할당
    - 파일 블록을 저장 장치 위치에 매핑하는 inode 같은 인덱스 구조를 사용.
    - 연속 할당과 링크 할당의 장점을 결합하여 효율적인 액세스와 파일을 쉽게 늘릴 수 있다.
    - 인덱스 할당은 ext2, ext3, ext4와 같은 많은 최신 파일 시스템에서 사용

### 4.4 파일 시스템 구성
#### 1. 디렉토리 구조
- 단일 레벨 디렉토리
    - 계층 구조 없이 모든 파일과 디렉토리를 동일한 레벨에 저장
    - 간단한 구조는 구현하고 이해하기 쉽지만 파일과 디렉토리의 수가 증가하면 관리가 어렵다.
- 2단계 디렉토리
    - 파일과 디렉토리를 각 사용자별로 별도의 디렉토리로 구성
    - 각 사용자는 자신의 모든 파일과 하위 디렉토리가 들어 있는 최상위 디렉토리를 가진다.
    - 다른 사용자의 데이터를 간섭하지 않고 자신의 파일과 디렉토리를 독립적으로 관리
- 트리 구조 디렉토리
    - 다른 디렉토리를 포함하는 디렉토리가 있는 계층 구조
    - 직관적이고 유연하게 구성할 수 있다.
    - 대부분의 최신 파일 시스템 구조
- 비순환 그래프 디렉토리
    - 디렉토리가 다른 디렉토리에 대한 참조, 링크를 포함할 수 있도록 방향성 비순환 그래프를 형성
    - 데이터 복제 없이 여러 디렉토리 간에 파일과 디렉토리 공유 가능
    - 파일 시스템에서 주기를 처리하고 참조 수를 유지해야해서 더 복잡
