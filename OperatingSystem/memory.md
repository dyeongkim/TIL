# 운영체제/OperatingSystem
## 2. 메모리 관리


### 2.1 메모리 계층 구조

#### 1. 레지스터
- CPU 자체 내에 위치한 가장 빠르고 작은 메모리 유형
- 명령을 실행하는 동안 데이터 및 중간 결과를 저장하는데 사용
- 레지스터의 수는 제한되어 있다.
- 용량은 B~KB 
#### 2. 캐시 메모리
자주 액세스하는 데이터를 저장하는 데 사용되는 작고 빠른 메모리   
CPU와 메인 메모리 사이의 버퍼 역할로 메모리 액세스 대기 시간을 줄인다.
- L1 캐시
    - CPU에 통합된 가장 빠르고 작은 캐시 수준

- L2 캐시
    - L1 캐시보다 느리고 크며 종종 CPU 코어 간에 공유

- L3 캐시
    - L2 캐시보다 느리고 크며 단일 프로세서의 모든 CPU코어 간에 공유

공간적 및 시간적 지역성, 캐시 교체 정책 ex) LRU(Least Recently Used Algorithm) 및 멀티 코어 시스템의 캐시 일관성 프로토콜과 같은 액세스 시간을 최적화하기 위해 다양한 전략 사용.

#### 3. 메인 메모리(RAM/Random Access Memory)
프로세스를 실행하고 임시 데이터를 저장하는데 사용되는 기본 저장공간.   
RAM은 휘발성으로 전원이 꺼지면 내용이 사라짐.

- DRAM(Dynamic RAM)
    - SRAM보다 느리다.
    - 데이터를 유지하기 위해 주기적으로 새로고침 필요

- SRAM(Static RAM)
    - DRAM보다 빠름.
    - 재생이 필요없지만 더 많은 전력을 소비.


#### 4. 보조 저장장치(디스크)
가장 느린 메모리 유형으로 장기 데이터 저장에 사용됨.   
비휘발성으로 시스템 전원이 꺼져도 내용이 저장됨.

- HDD(Hard Disk Drive)
    - 자기 디스크를 사용한 드라이브
    - 저렴한 대신 느림

- SSD(Solid-State Drive)
    - NAND 플래시 메모리를 사용하는 드라이브
    - 비싼 대신 더 빠른 액세스 시간과 높은 내구성

<br>

---

<br>


### 2.2 주소 공간
>프로세스가 실행 중에 액세스할 수 있는 메모리 주소의 범위   

#### 1. 코드(Code/Text) 세그먼트
- 프로세스의 실행 가능한 코드가 포함되는 부분
- 실행 중에 프로그램 코드가 실수 혹은 악의로 수정되지 않도록 읽기 전용(Read-only)
- 프로세스의 모든 인스턴스 간에 공유되ㅏ므로 전체 메모리 사용량이 줄어든다

#### 2. 데이터 세그먼트
- 프로세스에서 사용하는 전역 및 정적 변수가 포함되는 부분
- 두개의 하위 세그먼트로 나뉜다.
    - 초기화된 데이터 세그먼트
        - 명시적으로 초기화된 변수를 포함
        - 실행 파일에 저장되고 프로세스 생성 중에 메모리에 로드
    - 초기화 되지 않은 데이터 세그먼트 BSS(Block Stated Symbol)
        - 초기값 없는 전역변수, 배열, 정적(Static) 변수가 저장되는 영역
        - 프로세스가 실행될 때 자동으로 0으로 초기화

#### 3. 힙 세그먼트
- 프로세스 실행 중 동적 메모리 할당에 사용된다.
- 메모리의 낮은 주소에서 높은 주소의 방향으로 할당
- 사용 가능한 메모리 블록을 찾고 조각화를 방지하는 메모리 관리자에 의해 관리됨

#### 4. 스택 세그먼트
- 함수 매개 변수, 반환 주소 및 저장된 레지스스터 값과 같은 함수 호출 정보와 로컬 변수가 포함되는 부분
- 함수가 호출되고 반환될 때 자동으로 확장 및 축소 되는 **후입선출(LIFO)** 데이터 구조
- 함수 호출은 로컬 변수 및 관련 정보를 포함하는 새 스택 프레임을 생성
- 힙에서 생성된 Object 타입의 데이터 참조값이 할당됨.

<br>

스택 및 힙 세그먼트는 주소 공간의 반대쪽 끝에 배치되어 서로를 향해 확장된다.   
이 배열은 각 세그먼트의 사용 가능한 공간을 최대화하고 스택 오버플로 또는 힙 고갈의 위험을 최소화한다.